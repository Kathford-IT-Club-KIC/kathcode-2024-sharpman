<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="footer.css">
  <link rel="stylesheet" href="styles.css">
  <script type="module" src="putPosts.js"></script>
  <script type="module" src="displayPosts.js"></script>
  <script type="module" src="/Registration/login.js"></script>
</head>

<body>
  <header>
    <h1 id="fireH1">Fire Aid Nepal</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="../forestFDataFolder/forestFireData.html">Forest Fire Data</a>
      <a href="../mostimpacted/index.html">Most Impacted District</a>
      <a href="../Registration/login.html" class="loginThau">Login</a>
      <a href="#" id="logout">Logout</a>
      <a href="../Registration/registration.html" class="registerThau">Register</a>
      <a id="person-link" href="#" class="PersonClass">Person</a>
    </nav>
  </header>
  <main>
    <section class="fire-news">
      <h2>Recent Fire News</h2>
      <div class="slider" id="newsSlider">
        <div class="slides" id="slidesContainer">
          <!--Slides haru yaha dekhaune-->
        </div>
      </div>
    </section>
    <section class="create-post">
      <h2>Create a Post</h2>
      <form id="postForm">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required />
        <label for="details">Details:</label>
        <textarea id="details" name="details" required></textarea>
        <button type="submit">Submit</button>
      </form>
    </section>
    <h2 class="htwo">Help Posts</h2>
    <div id="postsContainer"></div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', () => {
        const sliderContainer = document.getElementById('slidesContainer');
        fetch('news.txt')
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.text();
          })
          .then(data => {
            const lines = data.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            if (lines.length === 0) {
              console.error('No headlines found in news.txt');
              return;
            }
            lines.forEach(line => {
              const slide = document.createElement('div');
              slide.className = 'slide';
              slide.textContent = line;
              sliderContainer.appendChild(slide);
            });
            startSlider();
          })
          .catch(error => {
            console.error('Error fetching news:', error);
          });
      });

      function startSlider() {
        const slides = document.getElementById('slidesContainer');
        let index = 0;
        setInterval(() => {
          index = (index + 1) % 3; // 3 slides xa vanera assume gareko
          slides.style.transform = `translateX(-${index * 33.333}%)`;
        }, 3000);
      }
      // document.addEventListener('DOMContentLoaded', function () {
      //   const logout = document.getElementById("logout")
      //   const loggedIn = localStorage.getItem("loggedIn");
      //   if (loggedIn === "true") {
      //     logout.textContent = "Log Out";
      //     logout.href = "../Registration/login.html";

      //   } else {
      //     logout.textContent = "Log In";
      //     logout.href = "../Registration/login.html";

      //   }
      // });
    </script>
  </main>
  <section class="footHo">
    <footer>
      <nav id="footNav">
        <div class="social-icons">
          <a href="https://twitter.com" target="_blank" id="twitter"><i class="fa-brands fa-twitter"></i></a>
          <a href="https://facebook.com" target="_blank" id="fb"><i class="fa-brands fa-facebook-f"></i></a>
          <a href="https://instagram.com" target="_blank" id="insta"><i class="fa-brands fa-instagram"></i></a>
          <a href="https://youtube.com" target="_blank" id="youtube"><i class="fa-brands fa-youtube"></i></a>
        </div>
      </nav>
      <div class="aboutUsDiv">
        <a href="" id="aboutUs">About Us</a>
      </div>
    </footer>
</section>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const loggedIn = localStorage.getItem("loggedIn");
    if(loggedIn==="true"){
      const loginThau = document.querySelector('.loginThau');
      const registerThau = document.querySelector('.registerThau');
      loginThau.addEventListener('click',()=>{
        alert("Can't Login. You are already logged in!");
        loginThau.setAttribute('href','index.html');
      })
      registerThau.addEventListener('click',()=>{
        alert("Can't Register. You are already registered!");
        registerThau.setAttribute('href','index.html');
      })
    

      const username = localStorage.getItem('UserName');
      if (username) {
        const personLink = document.getElementById('person-link');
        personLink.textContent = username;
      }
    }
    else{
      const personLink = document.getElementById('person-link');
      personLink.textContent = Person;
    }
    
  });
</script>

</body>
</html>